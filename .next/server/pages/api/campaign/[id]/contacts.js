"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/campaign/[id]/contacts";
exports.ids = ["pages/api/campaign/[id]/contacts"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcampaign%2F%5Bid%5D%2Fcontacts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ccampaign%5C%5Bid%5D%5Ccontacts.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcampaign%2F%5Bid%5D%2Fcontacts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ccampaign%5C%5Bid%5D%5Ccontacts.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_campaign_id_contacts_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\campaign\\[id]\\contacts.ts */ \"(api)/./pages/api/campaign/[id]/contacts.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_campaign_id_contacts_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_campaign_id_contacts_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/campaign/[id]/contacts\",\n        pathname: \"/api/campaign/[id]/contacts\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_campaign_id_contacts_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNhbXBhaWduJTJGJTVCaWQlNUQlMkZjb250YWN0cyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDY2FtcGFpZ24lNUMlNUJpZCU1RCU1Q2NvbnRhY3RzLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3NFO0FBQ3RFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQywrREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsK0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWFya2V0aW5nLW12cC8/OThjZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGNhbXBhaWduXFxcXFtpZF1cXFxcY29udGFjdHMudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jYW1wYWlnbi9baWRdL2NvbnRhY3RzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2FtcGFpZ24vW2lkXS9jb250YWN0c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcampaign%2F%5Bid%5D%2Fcontacts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ccampaign%5C%5Bid%5D%5Ccontacts.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/mongo.ts":
/*!**********************!*\
  !*** ./lib/mongo.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n// lib/mongo.ts\n\nconst uri = process.env.MONGODB_URI;\nif (!uri) throw new Error(\"MONGODB_URI not set\");\nlet client;\nlet clientPromise;\n// Retry logic in case MongoDB connection fails\nasync function connectWithRetry() {\n    const MAX_RETRIES = 5;\n    let attempts = 0;\n    let lastError = null;\n    while(attempts < MAX_RETRIES){\n        try {\n            const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, {\n                maxPoolSize: 10,\n                serverSelectionTimeoutMS: 10000,\n                socketTimeoutMS: 45000\n            });\n            await client.connect();\n            return client;\n        } catch (err) {\n            lastError = err;\n            attempts++;\n            console.error(`MongoDB connection failed (attempt ${attempts}/${MAX_RETRIES}):`, err);\n            if (attempts < MAX_RETRIES) {\n                await new Promise((resolve)=>setTimeout(resolve, 5000)); // wait for 5 seconds before retrying\n            }\n        }\n    }\n    // After max retries, throw the last error encountered\n    throw lastError || new Error(\"MongoDB connection failed after maximum retry attempts\");\n}\nif (!global._mongoClientPromise) {\n    global._mongoClientPromise = connectWithRetry();\n    // Optional: log connection events\n    global._mongoClientPromise.then((client)=>{\n        client.on(\"serverOpening\", (event)=>console.log(\"MongoDB server opening\", event));\n        client.on(\"serverClosed\", (event)=>console.warn(\"MongoDB server closed\", event));\n        client.on(\"topologyClosed\", ()=>console.warn(\"MongoDB topology closed\"));\n        client.on(\"topologyOpening\", ()=>console.log(\"MongoDB topology opening\"));\n        client.on(\"error\", (err)=>console.error(\"MongoDB error\", err));\n    }).catch((err)=>{\n        console.error(\"MongoDB client failed to connect after retries\", err);\n    });\n}\nclientPromise = global._mongoClientPromise;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clientPromise);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbW9uZ28udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsZUFBZTtBQUN1QjtBQUV0QyxNQUFNQyxNQUFNQyxRQUFRQyxHQUFHLENBQUNDLFdBQVc7QUFDbkMsSUFBSSxDQUFDSCxLQUFLLE1BQU0sSUFBSUksTUFBTTtBQUUxQixJQUFJQztBQUNKLElBQUlDO0FBT0osK0NBQStDO0FBQy9DLGVBQWVDO0lBQ2IsTUFBTUMsY0FBYztJQUNwQixJQUFJQyxXQUFXO0lBQ2YsSUFBSUMsWUFBMEI7SUFFOUIsTUFBT0QsV0FBV0QsWUFBYTtRQUM3QixJQUFJO1lBQ0YsTUFBTUgsU0FBUyxJQUFJTixnREFBV0EsQ0FBQ0MsS0FBSztnQkFDbENXLGFBQWE7Z0JBQ2JDLDBCQUEwQjtnQkFDMUJDLGlCQUFpQjtZQUNuQjtZQUNBLE1BQU1SLE9BQU9TLE9BQU87WUFDcEIsT0FBT1Q7UUFDVCxFQUFFLE9BQU9VLEtBQVU7WUFDakJMLFlBQVlLO1lBQ1pOO1lBQ0FPLFFBQVFDLEtBQUssQ0FBQyxDQUFDLG1DQUFtQyxFQUFFUixTQUFTLENBQUMsRUFBRUQsWUFBWSxFQUFFLENBQUMsRUFBRU87WUFDakYsSUFBSU4sV0FBV0QsYUFBYTtnQkFDMUIsTUFBTSxJQUFJVSxRQUFRQyxDQUFBQSxVQUFXQyxXQUFXRCxTQUFTLFFBQVEscUNBQXFDO1lBQ2hHO1FBQ0Y7SUFDRjtJQUVBLHNEQUFzRDtJQUN0RCxNQUFNVCxhQUFhLElBQUlOLE1BQU07QUFDL0I7QUFFQSxJQUFJLENBQUNpQixPQUFPQyxtQkFBbUIsRUFBRTtJQUMvQkQsT0FBT0MsbUJBQW1CLEdBQUdmO0lBRTdCLGtDQUFrQztJQUNsQ2MsT0FBT0MsbUJBQW1CLENBQ3ZCQyxJQUFJLENBQUNsQixDQUFBQTtRQUNKQSxPQUFPbUIsRUFBRSxDQUFDLGlCQUFpQixDQUFDQyxRQUFVVCxRQUFRVSxHQUFHLENBQUMsMEJBQTBCRDtRQUM1RXBCLE9BQU9tQixFQUFFLENBQUMsZ0JBQWdCLENBQUNDLFFBQVVULFFBQVFXLElBQUksQ0FBQyx5QkFBeUJGO1FBQzNFcEIsT0FBT21CLEVBQUUsQ0FBQyxrQkFBa0IsSUFBTVIsUUFBUVcsSUFBSSxDQUFDO1FBQy9DdEIsT0FBT21CLEVBQUUsQ0FBQyxtQkFBbUIsSUFBTVIsUUFBUVUsR0FBRyxDQUFDO1FBQy9DckIsT0FBT21CLEVBQUUsQ0FBQyxTQUFTLENBQUNULE1BQVFDLFFBQVFDLEtBQUssQ0FBQyxpQkFBaUJGO0lBQzdELEdBQ0NhLEtBQUssQ0FBQ2IsQ0FBQUE7UUFDTEMsUUFBUUMsS0FBSyxDQUFDLGtEQUFrREY7SUFDbEU7QUFDSjtBQUVBVCxnQkFBZ0JlLE9BQU9DLG1CQUFtQjtBQUUxQyxpRUFBZWhCLGFBQWFBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tYXJrZXRpbmctbXZwLy4vbGliL21vbmdvLnRzPzU3ZmUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL21vbmdvLnRzXHJcbmltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSAnbW9uZ29kYic7XHJcblxyXG5jb25zdCB1cmkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSTtcclxuaWYgKCF1cmkpIHRocm93IG5ldyBFcnJvcignTU9OR09EQl9VUkkgbm90IHNldCcpO1xyXG5cclxubGV0IGNsaWVudDogTW9uZ29DbGllbnQ7XHJcbmxldCBjbGllbnRQcm9taXNlOiBQcm9taXNlPE1vbmdvQ2xpZW50PjtcclxuXHJcbmRlY2xhcmUgZ2xvYmFsIHtcclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdmFyXHJcbiAgdmFyIF9tb25nb0NsaWVudFByb21pc2U6IFByb21pc2U8TW9uZ29DbGllbnQ+IHwgdW5kZWZpbmVkO1xyXG59XHJcblxyXG4vLyBSZXRyeSBsb2dpYyBpbiBjYXNlIE1vbmdvREIgY29ubmVjdGlvbiBmYWlsc1xyXG5hc3luYyBmdW5jdGlvbiBjb25uZWN0V2l0aFJldHJ5KCk6IFByb21pc2U8TW9uZ29DbGllbnQ+IHtcclxuICBjb25zdCBNQVhfUkVUUklFUyA9IDU7XHJcbiAgbGV0IGF0dGVtcHRzID0gMDtcclxuICBsZXQgbGFzdEVycm9yOiBFcnJvciB8IG51bGwgPSBudWxsO1xyXG5cclxuICB3aGlsZSAoYXR0ZW1wdHMgPCBNQVhfUkVUUklFUykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KHVyaSwge1xyXG4gICAgICAgIG1heFBvb2xTaXplOiAxMCxcclxuICAgICAgICBzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVM6IDEwMDAwLFxyXG4gICAgICAgIHNvY2tldFRpbWVvdXRNUzogNDUwMDAsXHJcbiAgICAgIH0pO1xyXG4gICAgICBhd2FpdCBjbGllbnQuY29ubmVjdCgpO1xyXG4gICAgICByZXR1cm4gY2xpZW50O1xyXG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcclxuICAgICAgbGFzdEVycm9yID0gZXJyO1xyXG4gICAgICBhdHRlbXB0cysrO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBNb25nb0RCIGNvbm5lY3Rpb24gZmFpbGVkIChhdHRlbXB0ICR7YXR0ZW1wdHN9LyR7TUFYX1JFVFJJRVN9KTpgLCBlcnIpO1xyXG4gICAgICBpZiAoYXR0ZW1wdHMgPCBNQVhfUkVUUklFUykge1xyXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MDAwKSk7IC8vIHdhaXQgZm9yIDUgc2Vjb25kcyBiZWZvcmUgcmV0cnlpbmdcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQWZ0ZXIgbWF4IHJldHJpZXMsIHRocm93IHRoZSBsYXN0IGVycm9yIGVuY291bnRlcmVkXHJcbiAgdGhyb3cgbGFzdEVycm9yIHx8IG5ldyBFcnJvcignTW9uZ29EQiBjb25uZWN0aW9uIGZhaWxlZCBhZnRlciBtYXhpbXVtIHJldHJ5IGF0dGVtcHRzJyk7XHJcbn1cclxuXHJcbmlmICghZ2xvYmFsLl9tb25nb0NsaWVudFByb21pc2UpIHtcclxuICBnbG9iYWwuX21vbmdvQ2xpZW50UHJvbWlzZSA9IGNvbm5lY3RXaXRoUmV0cnkoKTtcclxuICBcclxuICAvLyBPcHRpb25hbDogbG9nIGNvbm5lY3Rpb24gZXZlbnRzXHJcbiAgZ2xvYmFsLl9tb25nb0NsaWVudFByb21pc2VcclxuICAgIC50aGVuKGNsaWVudCA9PiB7XHJcbiAgICAgIGNsaWVudC5vbignc2VydmVyT3BlbmluZycsIChldmVudCkgPT4gY29uc29sZS5sb2coJ01vbmdvREIgc2VydmVyIG9wZW5pbmcnLCBldmVudCkpO1xyXG4gICAgICBjbGllbnQub24oJ3NlcnZlckNsb3NlZCcsIChldmVudCkgPT4gY29uc29sZS53YXJuKCdNb25nb0RCIHNlcnZlciBjbG9zZWQnLCBldmVudCkpO1xyXG4gICAgICBjbGllbnQub24oJ3RvcG9sb2d5Q2xvc2VkJywgKCkgPT4gY29uc29sZS53YXJuKCdNb25nb0RCIHRvcG9sb2d5IGNsb3NlZCcpKTtcclxuICAgICAgY2xpZW50Lm9uKCd0b3BvbG9neU9wZW5pbmcnLCAoKSA9PiBjb25zb2xlLmxvZygnTW9uZ29EQiB0b3BvbG9neSBvcGVuaW5nJykpO1xyXG4gICAgICBjbGllbnQub24oJ2Vycm9yJywgKGVycikgPT4gY29uc29sZS5lcnJvcignTW9uZ29EQiBlcnJvcicsIGVycikpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdNb25nb0RCIGNsaWVudCBmYWlsZWQgdG8gY29ubmVjdCBhZnRlciByZXRyaWVzJywgZXJyKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5jbGllbnRQcm9taXNlID0gZ2xvYmFsLl9tb25nb0NsaWVudFByb21pc2U7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGllbnRQcm9taXNlOyJdLCJuYW1lcyI6WyJNb25nb0NsaWVudCIsInVyaSIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1VSSSIsIkVycm9yIiwiY2xpZW50IiwiY2xpZW50UHJvbWlzZSIsImNvbm5lY3RXaXRoUmV0cnkiLCJNQVhfUkVUUklFUyIsImF0dGVtcHRzIiwibGFzdEVycm9yIiwibWF4UG9vbFNpemUiLCJzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVMiLCJzb2NrZXRUaW1lb3V0TVMiLCJjb25uZWN0IiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiZ2xvYmFsIiwiX21vbmdvQ2xpZW50UHJvbWlzZSIsInRoZW4iLCJvbiIsImV2ZW50IiwibG9nIiwid2FybiIsImNhdGNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/mongo.ts\n");

/***/ }),

/***/ "(api)/./pages/api/campaign/[id]/contacts.ts":
/*!*********************************************!*\
  !*** ./pages/api/campaign/[id]/contacts.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_mongo__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../lib/mongo */ \"(api)/./lib/mongo.ts\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_1__);\n// pages/api/campaign/[id]/contacts.ts\n\n\nfunction tryParseObjectId(s) {\n    if (!s) return null;\n    if (typeof s === \"object\" && s instanceof mongodb__WEBPACK_IMPORTED_MODULE_1__.ObjectId) return s;\n    if (typeof s === \"string\" && /^[0-9a-fA-F]{24}$/.test(s)) {\n        try {\n            return new mongodb__WEBPACK_IMPORTED_MODULE_1__.ObjectId(s);\n        } catch  {\n            return null;\n        }\n    }\n    return null;\n}\nasync function handler(req, res) {\n    if (req.method !== \"GET\") return res.status(405).json({\n        error: \"Method not allowed\"\n    });\n    const { id } = req.query;\n    if (!id || typeof id !== \"string\") return res.status(400).json({\n        error: \"Invalid campaign id\"\n    });\n    const status = typeof req.query.status === \"string\" ? req.query.status : undefined;\n    const page = Math.max(1, Number(req.query.page ? Number(req.query.page) : 1));\n    const pageSize = Math.max(1, Number(req.query.pageSize ? Number(req.query.pageSize) : 25));\n    try {\n        const client = await _lib_mongo__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n        const db = client.db(\"PlatformData\");\n        const campaignIdStr = String(id);\n        const campaignIdObj = tryParseObjectId(campaignIdStr);\n        // Base filter for campaign_contacts\n        const baseFilter = {\n            campaignId: campaignIdObj ?? campaignIdStr\n        };\n        if (status && status !== \"all\") baseFilter.status = status;\n        // Total count\n        let total = await db.collection(\"campaign_contacts\").countDocuments(baseFilter);\n        // Pagination\n        const skip = (page - 1) * pageSize;\n        const cursor = db.collection(\"campaign_contacts\").find(baseFilter).sort({\n            createdAt: 1\n        }).skip(skip).limit(pageSize);\n        const rows = await cursor.toArray();\n        // Collect contactIds present on this page\n        const contactIdValues = rows.map((r)=>r.contactId).filter(Boolean);\n        // Build arrays for ObjectId vs string contactId lookups\n        const contactObjIds = contactIdValues.map((v)=>{\n            try {\n                if (typeof v === \"object\" && v instanceof mongodb__WEBPACK_IMPORTED_MODULE_1__.ObjectId) return v;\n                if (typeof v === \"string\" && /^[0-9a-fA-F]{24}$/.test(v)) return new mongodb__WEBPACK_IMPORTED_MODULE_1__.ObjectId(v);\n            } catch  {}\n            return null;\n        }).filter(Boolean);\n        const stringContactIds = contactIdValues.map((v)=>typeof v === \"string\" ? v : v && v.toString ? v.toString() : null).filter(Boolean);\n        // Fetch contact details (email) for these contactIds\n        let contactDocsMap = {};\n        if (contactObjIds.length || stringContactIds.length) {\n            const contactQuery = {\n                $or: []\n            };\n            if (contactObjIds.length) contactQuery.$or.push({\n                _id: {\n                    $in: contactObjIds\n                }\n            });\n            if (stringContactIds.length) contactQuery.$or.push({\n                _id: {\n                    $in: stringContactIds\n                }\n            });\n            if (contactQuery.$or.length > 0) {\n                const contactDocs = await db.collection(\"contacts\").find(contactQuery).project({\n                    email: 1\n                }).toArray();\n                for (const c of contactDocs)contactDocsMap[c._id && c._id.toString ? c._id.toString() : String(c._id)] = c;\n            }\n        }\n        // Aggregate campaign_events for these contactIds (opens & clicks)\n        let openLookup = {};\n        let clickLookup = {};\n        if (contactIdValues.length > 0) {\n            const contactMatchClauses = [];\n            if (contactObjIds.length) contactMatchClauses.push({\n                contactId: {\n                    $in: contactObjIds\n                }\n            });\n            if (stringContactIds.length) contactMatchClauses.push({\n                contactId: {\n                    $in: stringContactIds\n                }\n            });\n            // Build campaignId match that copes with ObjectId or string\n            const campaignIdMatch = campaignIdObj ? {\n                $or: [\n                    {\n                        campaignId: campaignIdObj\n                    },\n                    {\n                        campaignId: campaignIdStr\n                    }\n                ]\n            } : {\n                campaignId: campaignIdStr\n            };\n            try {\n                const openAgg = await db.collection(\"campaign_events\").aggregate([\n                    {\n                        $match: {\n                            $and: [\n                                campaignIdMatch,\n                                {\n                                    type: \"open\"\n                                },\n                                {\n                                    $or: contactMatchClauses\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        $group: {\n                            _id: \"$contactId\",\n                            lastOpenAt: {\n                                $max: \"$createdAt\"\n                            },\n                            opens: {\n                                $sum: 1\n                            }\n                        }\n                    }\n                ]).toArray();\n                for (const o of openAgg){\n                    const key = o._id && o._id.toString ? o._id.toString() : String(o._id);\n                    openLookup[key] = o.lastOpenAt ? new Date(o.lastOpenAt).toISOString() : null;\n                }\n            } catch (e) {\n                console.warn(\"Failed to aggregate opens for contacts page\", e);\n            }\n            try {\n                const campaignIdMatch2 = campaignIdObj ? {\n                    $or: [\n                        {\n                            campaignId: campaignIdObj\n                        },\n                        {\n                            campaignId: campaignIdStr\n                        }\n                    ]\n                } : {\n                    campaignId: campaignIdStr\n                };\n                const clickAgg = await db.collection(\"campaign_events\").aggregate([\n                    {\n                        $match: {\n                            $and: [\n                                campaignIdMatch2,\n                                {\n                                    type: \"click\"\n                                },\n                                {\n                                    $or: contactMatchClauses\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        $group: {\n                            _id: \"$contactId\",\n                            lastClickAt: {\n                                $max: \"$createdAt\"\n                            },\n                            clicks: {\n                                $sum: 1\n                            }\n                        }\n                    }\n                ]).toArray();\n                for (const c of clickAgg){\n                    const key = c._id && c._id.toString ? c._id.toString() : String(c._id);\n                    clickLookup[key] = c.lastClickAt ? new Date(c.lastClickAt).toISOString() : null;\n                }\n            } catch (e) {\n                console.warn(\"Failed to aggregate clicks for contacts page\", e);\n            }\n        }\n        // Build response items\n        const items = rows.map((r)=>{\n            const cidKey = r.contactId && r.contactId.toString ? r.contactId.toString() : String(r.contactId ?? \"\");\n            const contactDoc = contactDocsMap[cidKey];\n            const email = contactDoc?.email ?? r.email ?? null;\n            const lastOpenAt = openLookup[cidKey] ?? null;\n            const lastClickAt = clickLookup[cidKey] ?? null;\n            return {\n                id: r._id?.toString?.() ?? String(r._id),\n                contactId: r.contactId && r.contactId.toString ? r.contactId.toString() : String(r.contactId ?? null),\n                email,\n                status: r.status ?? null,\n                attempts: typeof r.attempts === \"number\" ? r.attempts : 0,\n                bgAttempts: typeof r.bgAttempts === \"number\" ? r.bgAttempts : 0,\n                lastAttemptAt: r.lastAttemptAt ? new Date(r.lastAttemptAt).toISOString() : null,\n                lastError: r.lastError ?? null,\n                opened: !!lastOpenAt,\n                lastOpenAt,\n                clicked: !!lastClickAt,\n                lastClickAt\n            };\n        });\n        // Available statuses\n        let availableStatuses = [];\n        try {\n            availableStatuses = await db.collection(\"campaign_contacts\").distinct(\"status\", {\n                campaignId: campaignIdObj ?? campaignIdStr\n            });\n            availableStatuses = (availableStatuses || []).filter(Boolean);\n        } catch (e) {\n        // ignore\n        }\n        const pages = Math.max(1, Math.ceil(total / pageSize));\n        return res.status(200).json({\n            items,\n            total,\n            page,\n            pages,\n            pageSize,\n            availableStatuses\n        });\n    } catch (err) {\n        console.error(\"Contacts API error\", err);\n        return res.status(500).json({\n            error: \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvY2FtcGFpZ24vW2lkXS9jb250YWN0cy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsc0NBQXNDO0FBRVk7QUFDZjtBQUVuQyxTQUFTRSxpQkFBaUJDLENBQU07SUFDOUIsSUFBSSxDQUFDQSxHQUFHLE9BQU87SUFDZixJQUFJLE9BQU9BLE1BQU0sWUFBWUEsYUFBYUYsNkNBQVFBLEVBQUUsT0FBT0U7SUFDM0QsSUFBSSxPQUFPQSxNQUFNLFlBQVksb0JBQW9CQyxJQUFJLENBQUNELElBQUk7UUFDeEQsSUFBSTtZQUFFLE9BQU8sSUFBSUYsNkNBQVFBLENBQUNFO1FBQUksRUFBRSxPQUFNO1lBQUUsT0FBTztRQUFNO0lBQ3ZEO0lBQ0EsT0FBTztBQUNUO0FBRWUsZUFBZUUsUUFBUUMsR0FBbUIsRUFBRUMsR0FBb0I7SUFDN0UsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLE9BQU8sT0FBT0QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztRQUFFQyxPQUFPO0lBQXFCO0lBRXBGLE1BQU0sRUFBRUMsRUFBRSxFQUFFLEdBQUdOLElBQUlPLEtBQUs7SUFDeEIsSUFBSSxDQUFDRCxNQUFNLE9BQU9BLE9BQU8sVUFBVSxPQUFPTCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1FBQUVDLE9BQU87SUFBc0I7SUFFOUYsTUFBTUYsU0FBUyxPQUFPSCxJQUFJTyxLQUFLLENBQUNKLE1BQU0sS0FBSyxXQUFXSCxJQUFJTyxLQUFLLENBQUNKLE1BQU0sR0FBR0s7SUFDekUsTUFBTUMsT0FBT0MsS0FBS0MsR0FBRyxDQUFDLEdBQUdDLE9BQU9aLElBQUlPLEtBQUssQ0FBQ0UsSUFBSSxHQUFHRyxPQUFPWixJQUFJTyxLQUFLLENBQUNFLElBQUksSUFBSTtJQUMxRSxNQUFNSSxXQUFXSCxLQUFLQyxHQUFHLENBQUMsR0FBR0MsT0FBT1osSUFBSU8sS0FBSyxDQUFDTSxRQUFRLEdBQUdELE9BQU9aLElBQUlPLEtBQUssQ0FBQ00s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ckUsUUFBUVI7UUFFNUMsT0FBT1osSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQjBFO1lBQ0F6RDtZQUNBWjtZQUNBZ0Y7WUFDQTVFO1lBQ0EwRTtRQUNGO0lBQ0YsRUFBRSxPQUFPSSxLQUFLO1FBQ1puQixRQUFRbkUsS0FBSyxDQUFDLHNCQUFzQnNGO1FBQ3BDLE9BQU8xRixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBd0I7SUFDL0Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL21hcmtldGluZy1tdnAvLi9wYWdlcy9hcGkvY2FtcGFpZ24vW2lkXS9jb250YWN0cy50cz8yNzRiIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHBhZ2VzL2FwaS9jYW1wYWlnbi9baWRdL2NvbnRhY3RzLnRzXHJcbmltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xyXG5pbXBvcnQgY2xpZW50UHJvbWlzZSBmcm9tICcuLi8uLi8uLi8uLi9saWIvbW9uZ28nO1xyXG5pbXBvcnQgeyBPYmplY3RJZCB9IGZyb20gJ21vbmdvZGInO1xyXG5cclxuZnVuY3Rpb24gdHJ5UGFyc2VPYmplY3RJZChzOiBhbnkpIHtcclxuICBpZiAoIXMpIHJldHVybiBudWxsO1xyXG4gIGlmICh0eXBlb2YgcyA9PT0gJ29iamVjdCcgJiYgcyBpbnN0YW5jZW9mIE9iamVjdElkKSByZXR1cm4gcztcclxuICBpZiAodHlwZW9mIHMgPT09ICdzdHJpbmcnICYmIC9eWzAtOWEtZkEtRl17MjR9JC8udGVzdChzKSkge1xyXG4gICAgdHJ5IHsgcmV0dXJuIG5ldyBPYmplY3RJZChzKTsgfSBjYXRjaCB7IHJldHVybiBudWxsOyB9XHJcbiAgfVxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdHRVQnKSByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XHJcblxyXG4gIGNvbnN0IHsgaWQgfSA9IHJlcS5xdWVyeTtcclxuICBpZiAoIWlkIHx8IHR5cGVvZiBpZCAhPT0gJ3N0cmluZycpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBjYW1wYWlnbiBpZCcgfSk7XHJcblxyXG4gIGNvbnN0IHN0YXR1cyA9IHR5cGVvZiByZXEucXVlcnkuc3RhdHVzID09PSAnc3RyaW5nJyA/IHJlcS5xdWVyeS5zdGF0dXMgOiB1bmRlZmluZWQ7XHJcbiAgY29uc3QgcGFnZSA9IE1hdGgubWF4KDEsIE51bWJlcihyZXEucXVlcnkucGFnZSA/IE51bWJlcihyZXEucXVlcnkucGFnZSkgOiAxKSk7XHJcbiAgY29uc3QgcGFnZVNpemUgPSBNYXRoLm1heCgxLCBOdW1iZXIocmVxLnF1ZXJ5LnBhZ2VTaXplID8gTnVtYmVyKHJlcS5xdWVyeS5wYWdlU2l6ZSkgOiAyNSkpO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgY2xpZW50UHJvbWlzZTtcclxuICAgIGNvbnN0IGRiID0gY2xpZW50LmRiKCdQbGF0Zm9ybURhdGEnKTtcclxuXHJcbiAgICBjb25zdCBjYW1wYWlnbklkU3RyID0gU3RyaW5nKGlkKTtcclxuICAgIGNvbnN0IGNhbXBhaWduSWRPYmogPSB0cnlQYXJzZU9iamVjdElkKGNhbXBhaWduSWRTdHIpO1xyXG5cclxuICAgIC8vIEJhc2UgZmlsdGVyIGZvciBjYW1wYWlnbl9jb250YWN0c1xyXG4gICAgY29uc3QgYmFzZUZpbHRlcjogYW55ID0geyBjYW1wYWlnbklkOiBjYW1wYWlnbklkT2JqID8/IGNhbXBhaWduSWRTdHIgfTtcclxuICAgIGlmIChzdGF0dXMgJiYgc3RhdHVzICE9PSAnYWxsJykgYmFzZUZpbHRlci5zdGF0dXMgPSBzdGF0dXM7XHJcblxyXG4gICAgLy8gVG90YWwgY291bnRcclxuICAgIGxldCB0b3RhbCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2NhbXBhaWduX2NvbnRhY3RzJykuY291bnREb2N1bWVudHMoYmFzZUZpbHRlcik7XHJcblxyXG4gICAgLy8gUGFnaW5hdGlvblxyXG4gICAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBwYWdlU2l6ZTtcclxuICAgIGNvbnN0IGN1cnNvciA9IGRiLmNvbGxlY3Rpb24oJ2NhbXBhaWduX2NvbnRhY3RzJykuZmluZChiYXNlRmlsdGVyKS5zb3J0KHsgY3JlYXRlZEF0OiAxIH0pLnNraXAoc2tpcCkubGltaXQocGFnZVNpemUpO1xyXG5cclxuICAgIGNvbnN0IHJvd3MgPSBhd2FpdCBjdXJzb3IudG9BcnJheSgpO1xyXG5cclxuICAgIC8vIENvbGxlY3QgY29udGFjdElkcyBwcmVzZW50IG9uIHRoaXMgcGFnZVxyXG4gICAgY29uc3QgY29udGFjdElkVmFsdWVzID0gcm93cy5tYXAociA9PiByLmNvbnRhY3RJZCkuZmlsdGVyKEJvb2xlYW4pO1xyXG5cclxuICAgIC8vIEJ1aWxkIGFycmF5cyBmb3IgT2JqZWN0SWQgdnMgc3RyaW5nIGNvbnRhY3RJZCBsb29rdXBzXHJcbiAgICBjb25zdCBjb250YWN0T2JqSWRzID0gY29udGFjdElkVmFsdWVzXHJcbiAgICAgIC5tYXAoKHYpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiB2ID09PSAnb2JqZWN0JyAmJiB2IGluc3RhbmNlb2YgT2JqZWN0SWQpIHJldHVybiB2O1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiB2ID09PSAnc3RyaW5nJyAmJiAvXlswLTlhLWZBLUZdezI0fSQvLnRlc3QodikpIHJldHVybiBuZXcgT2JqZWN0SWQodik7XHJcbiAgICAgICAgfSBjYXRjaCB7fVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmlsdGVyKEJvb2xlYW4pIGFzIE9iamVjdElkW107XHJcblxyXG4gICAgY29uc3Qgc3RyaW5nQ29udGFjdElkcyA9IGNvbnRhY3RJZFZhbHVlc1xyXG4gICAgICAubWFwKCh2KSA9PiAodHlwZW9mIHYgPT09ICdzdHJpbmcnID8gdiA6ICh2ICYmIHYudG9TdHJpbmcgPyB2LnRvU3RyaW5nKCkgOiBudWxsKSkpXHJcbiAgICAgIC5maWx0ZXIoQm9vbGVhbikgYXMgc3RyaW5nW107XHJcblxyXG4gICAgLy8gRmV0Y2ggY29udGFjdCBkZXRhaWxzIChlbWFpbCkgZm9yIHRoZXNlIGNvbnRhY3RJZHNcclxuICAgIGxldCBjb250YWN0RG9jc01hcDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xyXG4gICAgaWYgKGNvbnRhY3RPYmpJZHMubGVuZ3RoIHx8IHN0cmluZ0NvbnRhY3RJZHMubGVuZ3RoKSB7XHJcbiAgICAgIGNvbnN0IGNvbnRhY3RRdWVyeTogYW55ID0geyAkb3I6IFtdIGFzIGFueVtdIH07XHJcbiAgICAgIGlmIChjb250YWN0T2JqSWRzLmxlbmd0aCkgY29udGFjdFF1ZXJ5LiRvci5wdXNoKHsgX2lkOiB7ICRpbjogY29udGFjdE9iaklkcyB9IH0pO1xyXG4gICAgICBpZiAoc3RyaW5nQ29udGFjdElkcy5sZW5ndGgpIGNvbnRhY3RRdWVyeS4kb3IucHVzaCh7IF9pZDogeyAkaW46IHN0cmluZ0NvbnRhY3RJZHMgfSB9KTtcclxuICAgICAgaWYgKGNvbnRhY3RRdWVyeS4kb3IubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGNvbnRhY3REb2NzID0gYXdhaXQgZGIuY29sbGVjdGlvbignY29udGFjdHMnKS5maW5kKGNvbnRhY3RRdWVyeSkucHJvamVjdCh7IGVtYWlsOiAxIH0pLnRvQXJyYXkoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGMgb2YgY29udGFjdERvY3MpIGNvbnRhY3REb2NzTWFwWyhjLl9pZCAmJiBjLl9pZC50b1N0cmluZyA/IGMuX2lkLnRvU3RyaW5nKCkgOiBTdHJpbmcoYy5faWQpKV0gPSBjO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWdncmVnYXRlIGNhbXBhaWduX2V2ZW50cyBmb3IgdGhlc2UgY29udGFjdElkcyAob3BlbnMgJiBjbGlja3MpXHJcbiAgICBsZXQgb3Blbkxvb2t1cDogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVsbD4gPSB7fTtcclxuICAgIGxldCBjbGlja0xvb2t1cDogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVsbD4gPSB7fTtcclxuXHJcbiAgICBpZiAoY29udGFjdElkVmFsdWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgY29udGFjdE1hdGNoQ2xhdXNlczogYW55W10gPSBbXTtcclxuICAgICAgaWYgKGNvbnRhY3RPYmpJZHMubGVuZ3RoKSBjb250YWN0TWF0Y2hDbGF1c2VzLnB1c2goeyBjb250YWN0SWQ6IHsgJGluOiBjb250YWN0T2JqSWRzIH0gfSk7XHJcbiAgICAgIGlmIChzdHJpbmdDb250YWN0SWRzLmxlbmd0aCkgY29udGFjdE1hdGNoQ2xhdXNlcy5wdXNoKHsgY29udGFjdElkOiB7ICRpbjogc3RyaW5nQ29udGFjdElkcyB9IH0pO1xyXG5cclxuICAgICAgLy8gQnVpbGQgY2FtcGFpZ25JZCBtYXRjaCB0aGF0IGNvcGVzIHdpdGggT2JqZWN0SWQgb3Igc3RyaW5nXHJcbiAgICAgIGNvbnN0IGNhbXBhaWduSWRNYXRjaDogYW55ID0gY2FtcGFpZ25JZE9iaiA/IHsgJG9yOiBbeyBjYW1wYWlnbklkOiBjYW1wYWlnbklkT2JqIH0sIHsgY2FtcGFpZ25JZDogY2FtcGFpZ25JZFN0ciB9XSB9IDogeyBjYW1wYWlnbklkOiBjYW1wYWlnbklkU3RyIH07XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IG9wZW5BZ2cgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCdjYW1wYWlnbl9ldmVudHMnKS5hZ2dyZWdhdGUoW1xyXG4gICAgICAgICAgeyAkbWF0Y2g6IHsgJGFuZDogWyBjYW1wYWlnbklkTWF0Y2gsIHsgdHlwZTogJ29wZW4nIH0sIHsgJG9yOiBjb250YWN0TWF0Y2hDbGF1c2VzIH0gXSB9IH0sXHJcbiAgICAgICAgICB7ICRncm91cDogeyBfaWQ6ICckY29udGFjdElkJywgbGFzdE9wZW5BdDogeyAkbWF4OiAnJGNyZWF0ZWRBdCcgfSwgb3BlbnM6IHsgJHN1bTogMSB9IH0gfSxcclxuICAgICAgICBdKS50b0FycmF5KCk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgbyBvZiBvcGVuQWdnKSB7XHJcbiAgICAgICAgICBjb25zdCBrZXkgPSBvLl9pZCAmJiBvLl9pZC50b1N0cmluZyA/IG8uX2lkLnRvU3RyaW5nKCkgOiBTdHJpbmcoby5faWQpO1xyXG4gICAgICAgICAgb3Blbkxvb2t1cFtrZXldID0gby5sYXN0T3BlbkF0ID8gKG5ldyBEYXRlKG8ubGFzdE9wZW5BdCkpLnRvSVNPU3RyaW5nKCkgOiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGFnZ3JlZ2F0ZSBvcGVucyBmb3IgY29udGFjdHMgcGFnZScsIGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGNhbXBhaWduSWRNYXRjaDI6IGFueSA9IGNhbXBhaWduSWRPYmogPyB7ICRvcjogW3sgY2FtcGFpZ25JZDogY2FtcGFpZ25JZE9iaiB9LCB7IGNhbXBhaWduSWQ6IGNhbXBhaWduSWRTdHIgfV0gfSA6IHsgY2FtcGFpZ25JZDogY2FtcGFpZ25JZFN0ciB9O1xyXG5cclxuICAgICAgICBjb25zdCBjbGlja0FnZyA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2NhbXBhaWduX2V2ZW50cycpLmFnZ3JlZ2F0ZShbXHJcbiAgICAgICAgICB7ICRtYXRjaDogeyAkYW5kOiBbIGNhbXBhaWduSWRNYXRjaDIsIHsgdHlwZTogJ2NsaWNrJyB9LCB7ICRvcjogY29udGFjdE1hdGNoQ2xhdXNlcyB9IF0gfSB9LFxyXG4gICAgICAgICAgeyAkZ3JvdXA6IHsgX2lkOiAnJGNvbnRhY3RJZCcsIGxhc3RDbGlja0F0OiB7ICRtYXg6ICckY3JlYXRlZEF0JyB9LCBjbGlja3M6IHsgJHN1bTogMSB9IH0gfSxcclxuICAgICAgICBdKS50b0FycmF5KCk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgYyBvZiBjbGlja0FnZykge1xyXG4gICAgICAgICAgY29uc3Qga2V5ID0gYy5faWQgJiYgYy5faWQudG9TdHJpbmcgPyBjLl9pZC50b1N0cmluZygpIDogU3RyaW5nKGMuX2lkKTtcclxuICAgICAgICAgIGNsaWNrTG9va3VwW2tleV0gPSBjLmxhc3RDbGlja0F0ID8gKG5ldyBEYXRlKGMubGFzdENsaWNrQXQpKS50b0lTT1N0cmluZygpIDogbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBhZ2dyZWdhdGUgY2xpY2tzIGZvciBjb250YWN0cyBwYWdlJywgZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBCdWlsZCByZXNwb25zZSBpdGVtc1xyXG4gICAgY29uc3QgaXRlbXMgPSByb3dzLm1hcCgocjogYW55KSA9PiB7XHJcbiAgICAgIGNvbnN0IGNpZEtleSA9IHIuY29udGFjdElkICYmIHIuY29udGFjdElkLnRvU3RyaW5nID8gci5jb250YWN0SWQudG9TdHJpbmcoKSA6IFN0cmluZyhyLmNvbnRhY3RJZCA/PyAnJyk7XHJcbiAgICAgIGNvbnN0IGNvbnRhY3REb2MgPSBjb250YWN0RG9jc01hcFtjaWRLZXldO1xyXG4gICAgICBjb25zdCBlbWFpbCA9IGNvbnRhY3REb2M/LmVtYWlsID8/IHIuZW1haWwgPz8gbnVsbDtcclxuXHJcbiAgICAgIGNvbnN0IGxhc3RPcGVuQXQgPSBvcGVuTG9va3VwW2NpZEtleV0gPz8gbnVsbDtcclxuICAgICAgY29uc3QgbGFzdENsaWNrQXQgPSBjbGlja0xvb2t1cFtjaWRLZXldID8/IG51bGw7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGlkOiByLl9pZD8udG9TdHJpbmc/LigpID8/IFN0cmluZyhyLl9pZCksXHJcbiAgICAgICAgY29udGFjdElkOiByLmNvbnRhY3RJZCAmJiByLmNvbnRhY3RJZC50b1N0cmluZyA/IHIuY29udGFjdElkLnRvU3RyaW5nKCkgOiBTdHJpbmcoci5jb250YWN0SWQgPz8gbnVsbCksXHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgc3RhdHVzOiByLnN0YXR1cyA/PyBudWxsLFxyXG4gICAgICAgIGF0dGVtcHRzOiB0eXBlb2Ygci5hdHRlbXB0cyA9PT0gJ251bWJlcicgPyByLmF0dGVtcHRzIDogMCxcclxuICAgICAgICBiZ0F0dGVtcHRzOiB0eXBlb2Ygci5iZ0F0dGVtcHRzID09PSAnbnVtYmVyJyA/IHIuYmdBdHRlbXB0cyA6IDAsXHJcbiAgICAgICAgbGFzdEF0dGVtcHRBdDogci5sYXN0QXR0ZW1wdEF0ID8gbmV3IERhdGUoci5sYXN0QXR0ZW1wdEF0KS50b0lTT1N0cmluZygpIDogbnVsbCxcclxuICAgICAgICBsYXN0RXJyb3I6IHIubGFzdEVycm9yID8/IG51bGwsXHJcbiAgICAgICAgb3BlbmVkOiAhIWxhc3RPcGVuQXQsXHJcbiAgICAgICAgbGFzdE9wZW5BdCxcclxuICAgICAgICBjbGlja2VkOiAhIWxhc3RDbGlja0F0LFxyXG4gICAgICAgIGxhc3RDbGlja0F0LFxyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQXZhaWxhYmxlIHN0YXR1c2VzXHJcbiAgICBsZXQgYXZhaWxhYmxlU3RhdHVzZXM6IHN0cmluZ1tdID0gW107XHJcbiAgICB0cnkge1xyXG4gICAgICBhdmFpbGFibGVTdGF0dXNlcyA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2NhbXBhaWduX2NvbnRhY3RzJykuZGlzdGluY3QoJ3N0YXR1cycsIHsgY2FtcGFpZ25JZDogY2FtcGFpZ25JZE9iaiA/PyBjYW1wYWlnbklkU3RyIH0pO1xyXG4gICAgICBhdmFpbGFibGVTdGF0dXNlcyA9IChhdmFpbGFibGVTdGF0dXNlcyB8fCBbXSkuZmlsdGVyKEJvb2xlYW4pO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAvLyBpZ25vcmVcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwYWdlcyA9IE1hdGgubWF4KDEsIE1hdGguY2VpbCh0b3RhbCAvIHBhZ2VTaXplKSk7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgaXRlbXMsXHJcbiAgICAgIHRvdGFsLFxyXG4gICAgICBwYWdlLFxyXG4gICAgICBwYWdlcyxcclxuICAgICAgcGFnZVNpemUsXHJcbiAgICAgIGF2YWlsYWJsZVN0YXR1c2VzLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdDb250YWN0cyBBUEkgZXJyb3InLCBlcnIpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiY2xpZW50UHJvbWlzZSIsIk9iamVjdElkIiwidHJ5UGFyc2VPYmplY3RJZCIsInMiLCJ0ZXN0IiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImlkIiwicXVlcnkiLCJ1bmRlZmluZWQiLCJwYWdlIiwiTWF0aCIsIm1heCIsIk51bWJlciIsInBhZ2VTaXplIiwiY2xpZW50IiwiZGIiLCJjYW1wYWlnbklkU3RyIiwiU3RyaW5nIiwiY2FtcGFpZ25JZE9iaiIsImJhc2VGaWx0ZXIiLCJjYW1wYWlnbklkIiwidG90YWwiLCJjb2xsZWN0aW9uIiwiY291bnREb2N1bWVudHMiLCJza2lwIiwiY3Vyc29yIiwiZmluZCIsInNvcnQiLCJjcmVhdGVkQXQiLCJsaW1pdCIsInJvd3MiLCJ0b0FycmF5IiwiY29udGFjdElkVmFsdWVzIiwibWFwIiwiciIsImNvbnRhY3RJZCIsImZpbHRlciIsIkJvb2xlYW4iLCJjb250YWN0T2JqSWRzIiwidiIsInN0cmluZ0NvbnRhY3RJZHMiLCJ0b1N0cmluZyIsImNvbnRhY3REb2NzTWFwIiwibGVuZ3RoIiwiY29udGFjdFF1ZXJ5IiwiJG9yIiwicHVzaCIsIl9pZCIsIiRpbiIsImNvbnRhY3REb2NzIiwicHJvamVjdCIsImVtYWlsIiwiYyIsIm9wZW5Mb29rdXAiLCJjbGlja0xvb2t1cCIsImNvbnRhY3RNYXRjaENsYXVzZXMiLCJjYW1wYWlnbklkTWF0Y2giLCJvcGVuQWdnIiwiYWdncmVnYXRlIiwiJG1hdGNoIiwiJGFuZCIsInR5cGUiLCIkZ3JvdXAiLCJsYXN0T3BlbkF0IiwiJG1heCIsIm9wZW5zIiwiJHN1bSIsIm8iLCJrZXkiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlIiwiY29uc29sZSIsIndhcm4iLCJjYW1wYWlnbklkTWF0Y2gyIiwiY2xpY2tBZ2ciLCJsYXN0Q2xpY2tBdCIsImNsaWNrcyIsIml0ZW1zIiwiY2lkS2V5IiwiY29udGFjdERvYyIsImF0dGVtcHRzIiwiYmdBdHRlbXB0cyIsImxhc3RBdHRlbXB0QXQiLCJsYXN0RXJyb3IiLCJvcGVuZWQiLCJjbGlja2VkIiwiYXZhaWxhYmxlU3RhdHVzZXMiLCJkaXN0aW5jdCIsInBhZ2VzIiwiY2VpbCIsImVyciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/campaign/[id]/contacts.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcampaign%2F%5Bid%5D%2Fcontacts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ccampaign%5C%5Bid%5D%5Ccontacts.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();